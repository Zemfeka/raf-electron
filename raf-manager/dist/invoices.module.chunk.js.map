{"version":3,"sources":["C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices-routing.module.ts","C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices.component.html","C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices.component.scss","C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices.component.ts","C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices.module.ts"],"names":[],"mappings":"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","file":"invoices.module.chunk.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { InvoicesComponent } from './invoices.component';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: InvoicesComponent\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class InvoicesRoutingModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices-routing.module.ts","module.exports = \"<div [@routerTransition]>\\r\\n    <app-page-header [heading]=\\\"'Invoices'\\\" [icon]=\\\"'fa-calendar'\\\"></app-page-header>\\r\\n    <div class=\\\"row\\\" *ngIf=\\\"showInvoice\\\">\\r\\n\\r\\n        \\r\\n        <div class=\\\"col col-xl-12 col-lg-12 col-xs-12\\\">\\r\\n            <div class=\\\"card mb-12\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    Invoice\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"card-body table-responsive\\\">\\r\\n                    <table class=\\\"table table-hover\\\">\\r\\n                        <thead>\\r\\n                            <tr>\\r\\n                                <th>Number</th>\\r\\n                                <th>Date</th>\\r\\n                                <th>Total</th>\\r\\n                                <th>Client Name</th>\\r\\n                                <th>Claiment First Name</th>\\r\\n                                <th>Claiment Last Name</th>\\r\\n                                <th>ref#</th>\\r\\n                            </tr>\\r\\n                        </thead>\\r\\n                        <tbody>\\r\\n                            <tr *ngFor=\\\"let invoice of invoices\\\">\\r\\n                                <td>{{invoice.Number}}</td>\\r\\n                                <td>{{invoice.InvoiceDate}}</td>\\r\\n                                <td>{{invoice.Total}}</td>\\r\\n                                <td>{{invoice.ClientName}}</td>\\r\\n                                <td>{{invoice.ClaimentFirstName}}</td>\\r\\n                                <td>{{invoice.ClaimentLastName}}</td>\\r\\n                                <td>{{invoice.BookingRef}}</td>\\r\\n                                <td>\\r\\n                                    <div class=\\\"btn-group\\\">\\r\\n                                        <button class=\\\"btn mce-btn-small\\\" (click)=\\\"open(content,this.invoice, false)\\\">\\r\\n                                                <span class=\\\"fa fa-hand-pointer-o\\\"></span>\\r\\n                                        </button>\\r\\n                                        <button class=\\\"btn mce-btn-small\\\" (click)=\\\"printInvoice(this.invoice.Id)\\\">\\r\\n                                            <span class=\\\"fa fa-print\\\"></span>\\r\\n                                    </button>\\r\\n                                    </div>\\r\\n                                </td>\\r\\n                            </tr>\\r\\n                        </tbody>\\r\\n\\r\\n                    </table>\\r\\n                </div>\\r\\n\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    \\r\\n    <ng-template #content let-c=\\\"close\\\" let-d=\\\"dismiss\\\" width=\\\"1000\\\">\\r\\n        <div class=\\\"modal-header\\\">\\r\\n            <h4 class=\\\"modal-title\\\">Invoice: {{invoice.Number}}</h4>\\r\\n            <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"c('Close click')\\\">\\r\\n                <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n            </button>\\r\\n        </div>\\r\\n        <!-- <div class=\\\"modal-body\\\">\\r\\n             <p>\\r\\n                  <b>{{invoice.BusinessName}}</b><br>\\r\\n                  Reg No:{{invoice.BusinessRegistrationNumber}}<br>\\r\\n                  Vat No:{{BusinessVatNumber}}\\r\\n             </p>\\r\\n             <p>\\r\\n                    <b>{{invoice.ClientName}}</b><br>\\r\\n                    \\r\\n               </p>\\r\\n        </div> -->\\r\\n\\r\\n        <div class=\\\"modal-body\\\">\\r\\n            <ngb-tabset>\\r\\n                <ngb-tab title=\\\"Invoice Details\\\">\\r\\n                    <ng-template ngbTabContent>\\r\\n                        <div class=\\\"btn-group\\\">\\r\\n                            <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"addItem()\\\">Add Item</button>\\r\\n                        </div>\\r\\n                        <div class=\\\"card-body table-responsive\\\">\\r\\n                            <table class=\\\"table table-hover\\\">\\r\\n                                <thead>\\r\\n                                    <tr>\\r\\n                                        <th>QTY</th>\\r\\n                                        <th>ITEM</th>\\r\\n                                        <th>DESCRIPTION</th>\\r\\n                                        <th>PRICE</th>\\r\\n                                        <th>SUBTOTAL</th>\\r\\n                                    </tr>\\r\\n                                </thead>\\r\\n                                <tbody>\\r\\n                                    <tr *ngFor=\\\"let invoiceItem of invoiceItems\\\">\\r\\n                                        <td class=\\\"text-center\\\">\\r\\n                                            <input type=\\\"number\\\" name=\\\"quantity\\\" class=\\\"form-control\\\" placeholder=\\\"QTY\\\" [(ngModel)]=\\\"invoiceItem.Quantity\\\">\\r\\n                                        </td>\\r\\n                                        <td>\\r\\n                                            <input type=\\\"text\\\" name=\\\"item\\\" class=\\\"form-control\\\" placeholder=\\\"Enter text\\\" [(ngModel)]=\\\"invoiceItem.Name\\\">\\r\\n                                        </td>\\r\\n                                        <td>\\r\\n                                            <textarea name=\\\"description\\\" class=\\\"form-control\\\" rows=\\\"1\\\" placeholder=\\\"Description\\\" [(ngModel)]=\\\"invoiceItem.Description\\\"></textarea>\\r\\n                                        </td>\\r\\n                                        <td>\\r\\n                                            <input type=\\\"number\\\" name=\\\"price\\\" class=\\\"form-control\\\" placeholder=\\\"0.00\\\" [(ngModel)]=\\\"invoiceItem.Price\\\">\\r\\n                                        </td>\\r\\n                                        <td>\\r\\n                                            R {{getSub(invoiceItem)}}\\r\\n                                        </td>\\r\\n                                        <td>\\r\\n                                            <!-- <div class=\\\"btn-group\\\">\\r\\n                                                <button class=\\\"btn mce-btn-small\\\" (click)=\\\"deleteInvoiceItem(invoiceItem)\\\">\\r\\n                                                                <span class=\\\"fa fa-remove\\\"></span>\\r\\n                                                            </button>\\r\\n                                            </div> -->\\r\\n                                        </td>\\r\\n                                    </tr>\\r\\n                                    <tr>\\r\\n                                        <td colspan=\\\"4\\\">Total</td>\\r\\n                                        <td><strong>{{this.invoice.Total}}</strong></td>\\r\\n                                    </tr>\\r\\n                                </tbody>\\r\\n                            </table>\\r\\n                        </div>\\r\\n                    </ng-template>\\r\\n                </ngb-tab>\\r\\n                \\r\\n            </ngb-tabset>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"modal-footer\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"c('Close click')\\\">Close</button>\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"saveInvoice()\\\">Calculate</button>\\r\\n        </div>\\r\\n    </ng-template>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices.component.html\n// module id = ../../../../../src/app/layout/invoices/invoices.component.html\n// module chunks = invoices.module","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices.component.scss\n// module id = ../../../../../src/app/layout/invoices/invoices.component.scss\n// module chunks = invoices.module","import { Component, OnInit } from '@angular/core';\r\nimport { InvoiceService, IInvoice, IInvoiceItem } from '../../services/invoice.service';\r\nimport { routerTransition } from '../../router.animations';\r\n\r\nimport { NgbModal, ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Time } from '@angular/common/src/i18n/locale_data_api';\r\nimport { Message } from '@angular/compiler/src/i18n/i18n_ast';\r\nimport { Alert } from 'selenium-webdriver';\r\nimport { forEach } from '@angular/router/src/utils/collection';\r\nimport { DataService } from '../../services/data.service';\r\nimport { Router } from '@angular/router';\r\n\r\nconst now = new Date();\r\n\r\n@Component({\r\n    selector: 'app-invoices',\r\n    templateUrl: './invoices.component.html',\r\n    styleUrls: ['./invoices.component.scss'],\r\n    providers: [InvoiceService, NgbModal, FormsModule, ReactiveFormsModule,DataService],\r\n    animations: [routerTransition()]\r\n})\r\nexport class InvoicesComponent implements OnInit {\r\n    invoices: IInvoice[];\r\n    invoiceItems: IInvoiceItem[];\r\n    invoiceItem: IInvoiceItem = this.initialiseinvoiceitem();\r\n    closeResult: string;\r\n    invoice: IInvoice = this.initialiseinvoice();\r\n    showDetail: boolean = false;\r\n    showInvoice: boolean = true;\r\n    constructor(private invoiceService: InvoiceService, private modalService: NgbModal,\r\n         private dataService: DataService, private router: Router) {}\r\n\r\n    initialiseinvoice() {\r\n        return { Id: 0, Number: '', InvoiceDate: now, Total: 0, UserId: 0, BookingId: 0, InvoiceBusinessId: 0, BusinessId: 0, BusinessName: '', BusinessRegistrationNumber: '', BusinessVatNumber: '', AttorneyId: 0, AttorneyBookingId: 0, AttorneyClientName: '', AttorneyContactPerson: '', AttorneyPhoneNumber: '', AttorneyEmail: '', ReportId: 0, ReportNotes: '', ReportUserId: 0, ReportBookingId: 0, AssessmentId: 0, AssessmentNotes: '', AssessmentUserId: 0, AssessmentBookingId: 0, AssessmentShowNoShow: 0, ClientName: '', ClaimentFirstName: '', ClaimentLastName: '', BookingDate: null, Time: null, Date: null, BookingTime: null, BookingRef:'', Items:[]};\r\n    }\r\n\r\n    initialiseinvoiceitem() {\r\n        return {\"Id\": 0, \"Quantity\": 0, \"Name\": '', \"Description\": '', \"Price\": 0, \"SubTotal\": 0, \"InvoiceId\": 0}\r\n    }\r\n\r\n    getInvoices(){\r\n        this.invoiceService.getInvoices()\r\n            .subscribe(results => this.invoices = results,\r\n            error => console.log(\"Error :: \" + error))\r\n        \r\n    }\r\n\r\n    getSum(){\r\n        var b = 0;\r\n        console.log(this.invoiceItems);\r\n        if(this.invoiceItems != undefined){\r\n            for(let i=0; i < this.invoiceItems.length;i++){\r\n                b += this.invoiceItems[i].SubTotal;\r\n            }\r\n        }\r\n        return b;\r\n    }\r\n\r\n    getSub(invoiceItem:any){\r\n        return this.invoiceItem.SubTotal = invoiceItem.Price * invoiceItem.Quantity;\r\n    }\r\n    \r\n\r\n    toggle() {\r\n        this.showDetail == true;\r\n        this.showInvoice == false;\r\n    }\r\n\r\n    saveInvoice() {  \r\n        this.invoice.Items = this.invoiceItems;\r\n        \r\n        var total = 0;\r\n        for (let item of this.invoice.Items) {\r\n            item.SubTotal = item.Quantity*item.Price;\r\n            total = total + item.SubTotal;\r\n            this.invoice.Total = total;\r\n        }\r\n\r\n        this.invoiceService.saveInvoices(this.invoice,total).subscribe(results => {                \r\n            //TODO: change the save to return bookingId and then use it.                                       \r\n                //save the attorney details                \r\n                var invoiceid = this.invoice.Id > 0 ? this.invoice.Id : results;\r\n                var counter = 0;\r\n                this.invoice.Id = invoiceid;\r\n\r\n                        //save invoice items\r\n                if(this.invoice.Items.length > 0) {                            \r\n                    for (let item of this.invoice.Items) {\r\n                        if(item.Id == 0) {\r\n                            item.InvoiceId = invoiceid;\r\n                            this.invoiceService.saveInvoiceItem(item).subscribe(d => {\r\n                            },\r\n                            error => console.log(\"Error :: \" + error));\r\n                        }     \r\n                        else{\r\n                            item.InvoiceId = invoiceid;\r\n                            this.invoiceService.updateInvoiceItem(item).subscribe(d => {\r\n                            },\r\n                            error => console.log(\"Error :: \" + error));\r\n                        }                \r\n                    }\r\n                }\r\n                   \r\n                \r\n                this.invoiceService.getInvoices().subscribe(b => {\r\n                    this.invoices = b;                                            \r\n                },\r\n                error => console.log(\"Error :: \" + error));\r\n        },\r\n        error => console.log(\"Error :: \" + error)); \r\n              \r\n  \r\n        \r\n    }\r\n\r\n    ngOnInit() {\r\n        this.getInvoices();\r\n    }\r\n\r\n    addItem(){\r\n        this.invoiceItems.push({\"Id\": 0, \"Quantity\": 0, \"Name\": '', \"Description\": '', \"Price\": 0, \"SubTotal\": 0, \"InvoiceId\": this.invoice.Id});\r\n    }\r\n\r\n    deleteInvoiceItem(invoiceItem: any){\r\n        console.log(\"went in\" + invoiceItem);\r\n        this.invoiceItems.splice(invoiceItem.index, 1);\r\n        // this.bookingsService.deleteBooking(bookingId)\r\n        // .subscribe(o => {\r\n        //     this.bookingsService.deleteAttorney(bookingId).subscribe(a =>{\r\n        //         this.bookingsService.deleteDocumentByBooking(bookingId).subscribe(d => {\r\n        //             this.getBookings().subscribe(results => this._bookings = results,\r\n        //                 error => console.log(\"Error :: \" + error));\r\n        //         })\r\n        //     })\r\n            \r\n        // });\r\n    }\r\n\r\n    open(content, data, isNew) {        \r\n        if(!isNew) {        \r\n            this.invoice = data;\r\n        } \r\n        \r\n        this.invoiceService.getInvoiceItems(this.invoice.Id)\r\n            .subscribe(results => this.invoiceItems = results,\r\n            error => console.log(\"Error :: \" + error));\r\n        \r\n        this.modalService.open(content,{size: 'lg'}).result.then((result) => {\r\n            this.closeResult = `Closed with: ${result}`;\r\n        }, (reason) => {\r\n            this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\r\n        });\r\n    }\r\n\r\n    private getDismissReason(reason: any): string {\r\n        if (reason === ModalDismissReasons.ESC) {\r\n            return 'by pressing ESC';\r\n        } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\r\n            return 'by clicking on a backdrop';\r\n        } else {\r\n            return  `with: ${reason}`;\r\n        }\r\n    }\r\n\r\n    printInvoice(invoiceId) {\r\n        this.dataService.setInvoiceId(invoiceId);\r\n        localStorage.setItem('invoiceId', invoiceId);\r\n        console.log(invoiceId);\r\n        \r\n\r\n        this.router.navigate([\"/invoiceprint\"]);\r\n    }\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { InvoicesRoutingModule } from './invoices-routing.module';\r\nimport { InvoicesComponent } from './invoices.component';\r\nimport { PageHeaderModule } from './../../shared';\r\nimport { DataService } from '../../services/data.service';\r\n\r\n@NgModule({\r\n    imports: [CommonModule, InvoicesRoutingModule,PageHeaderModule, NgbModule.forRoot(), FormsModule, ReactiveFormsModule,],\r\n    declarations: [InvoicesComponent],\r\n    providers: [DataService]\r\n})\r\nexport class InvoicesModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Projects/dytelli/raf-electron/raf-manager/src/app/layout/invoices/invoices.module.ts"],"sourceRoot":"webpack:///"}